function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{frJI:function(e,t,i){"use strict";i.r(t),i.d(t,"ImagesModule",(function(){return w}));var a=i("ofXK"),o=i("tyNb"),r=i("/sur"),n=i("fXoL"),c=i("1kSV"),l=i("htnc");function s(e,t){1&e&&(n.Sb(0,"div",14),n.Sb(1,"div",15),n.Sb(2,"span",16),n.Bc(3,"Loading..."),n.Rb(),n.Rb(),n.Rb())}function b(e,t){if(1&e){var i=n.Tb();n.Sb(0,"tr"),n.Sb(1,"th",20),n.Bc(2),n.Rb(),n.Sb(3,"td"),n.Ob(4,"img",21),n.Bc(5),n.Rb(),n.Sb(6,"td"),n.Bc(7),n.Rb(),n.Sb(8,"td"),n.Bc(9),n.Rb(),n.Sb(10,"td"),n.Sb(11,"button",22),n.ec("click",(function(){n.tc(i);var e=t.$implicit;return n.gc(2).deleteImage(e)})),n.Ob(12,"i",23),n.Rb(),n.Sb(13,"button",24),n.ec("click",(function(){n.tc(i);var e=t.$implicit;return n.gc(2).updateImage(e)})),n.Ob(14,"i",25),n.Rb(),n.Rb(),n.Rb()}if(2&e){var a=t.$implicit,o=t.index;n.Ab(2),n.Cc(o+1),n.Ab(2),n.lc("src",a.fileUrl,n.uc),n.Ab(1),n.Dc(" ",a.codigo," "),n.Ab(2),n.Cc(a.descripcion),n.Ab(2),n.Cc(a.categoria)}}function d(e,t){if(1&e&&(n.Sb(0,"table",17),n.Sb(1,"thead"),n.Sb(2,"tr"),n.Sb(3,"th",18),n.Bc(4,"#"),n.Rb(),n.Sb(5,"th",18),n.Bc(6,"Codigo"),n.Rb(),n.Sb(7,"th",18),n.Bc(8,"Descripci\xf3n"),n.Rb(),n.Sb(9,"th",18),n.Bc(10,"Categoria"),n.Rb(),n.Sb(11,"th",18),n.Bc(12,"#Tags"),n.Rb(),n.Rb(),n.Rb(),n.Sb(13,"tbody"),n.zc(14,b,15,5,"tr",19),n.Rb(),n.Rb()),2&e){var i=n.gc();n.Ab(14),n.lc("ngForOf",i.images)}}function u(e,t){1&e&&(n.Sb(0,"div",26),n.Sb(1,"h5",27),n.Bc(2,"Modal title"),n.Rb(),n.Sb(3,"button",28),n.ec("click",(function(){return t.$implicit.dismiss("Cross click")})),n.Sb(4,"span",29),n.Bc(5,"\xd7"),n.Rb(),n.Rb(),n.Rb(),n.Sb(6,"div",30),n.Sb(7,"p"),n.Bc(8,"One fine body\u2026"),n.Rb(),n.Rb(),n.Sb(9,"div",31),n.Sb(10,"button",32),n.ec("click",(function(){return t.$implicit.close("Close click")})),n.Bc(11,"Close"),n.Rb(),n.Rb())}var g,p=((g=function(){function e(t,i,a){_classCallCheck(this,e),this.modalService=t,this.imageService=i,this.router=a,this.page=1,this.pageSize=10,this.collectionSize=0,this.cargaCompleted=!0,this.sweetAlert=new r.a,this.widthClase=!1,this.getAllImages()}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"getAllImages",value:function(){var e=this;this.cargaCompleted=!1,this.imageService.getAllImages().subscribe((function(t){e.collectionSize=t.length,e.images=t.map((function(e,t){return Object.assign({idx:t+1},e)})).slice((e.page-1)*e.pageSize,(e.page-1)*e.pageSize+e.pageSize),e.cargaCompleted=!0}))}},{key:"agregarImage",value:function(){this.router.navigate(["/admin/images/addImage"])}},{key:"deleteImage",value:function(e){var t=this;this.sweetAlert.dialogAlertQuestion(e.codigo).then((function(i){var a;i.value&&(a=t.imageService.deleteImageById(e,e.fileUrl),t.showDialog(a,e.descripcion))}))}},{key:"updateImage",value:function(e){this.router.navigate(["/admin/images",e.id])}},{key:"showDialog",value:function(e,t){var i=this;e.then((function(e){e&&i.sweetAlert.dialogAlertSuccess(t)})).catch((function(e){e&&i.sweetAlert.dialogAlertError(t)}))}},{key:"abrirModal",value:function(e){this.modalService.open(e,{backdropClass:"back-color-success"})}},{key:"openVerticallyCentered",value:function(e){this.modalService.open(e,{centered:!0})}}]),e}()).\u0275fac=function(e){return new(e||g)(n.Nb(c.a),n.Nb(l.a),n.Nb(o.b))},g.\u0275cmp=n.Hb({type:g,selectors:[["app-images-list"]],decls:19,vars:5,consts:[[1,"d-flex","justify-content-between","flex-wrap","flex-md-nowrap","align-items-center","pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],[1,"btn-toolbar","mb-2","mb-md-0"],[1,"btn-group","mr-2"],["type","button",1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"linea"],["class","text-center",4,"ngIf"],["class","table table-striped",4,"ngIf"],[1,"d-flex","pagination","justify-content-end"],[3,"collectionSize","page","pageSize","pageChange"],["content",""],[1,"text-center"],["role","status",1,"spinner-border","text-success",2,"width","3rem","height","3rem"],[1,"sr-only"],[1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],[1,"mr-2",2,"width","40px",3,"src"],[1,"btn","btn-danger","mr-1",3,"click"],["aria-hidden","true",1,"fa","fa-window-close"],[1,"btn","btn-secondary",3,"click"],["aria-hidden","true",1,"fa","fa-pencil-square"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"]],template:function(e,t){1&e&&(n.Sb(0,"div",0),n.Sb(1,"h3",1),n.Bc(2,"Imagenes"),n.Rb(),n.Sb(3,"div",2),n.Sb(4,"div",3),n.Sb(5,"button",4),n.ec("click",(function(){return t.agregarImage()})),n.Bc(6,"Agregar"),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Sb(7,"div"),n.Sb(8,"div",5),n.Sb(9,"div",6),n.Sb(10,"h5",7),n.Bc(11,"Lista"),n.Rb(),n.Ob(12,"hr",8),n.zc(13,s,4,0,"div",9),n.zc(14,d,15,1,"table",10),n.Sb(15,"div",11),n.Sb(16,"ngb-pagination",12),n.ec("pageChange",(function(e){return t.page=e}))("pageChange",(function(){return t.getAllImages()})),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.zc(17,u,12,0,"ng-template",null,13,n.Ac),n.Rb()),2&e&&(n.Ab(13),n.lc("ngIf",!t.cargaCompleted),n.Ab(1),n.lc("ngIf",t.cargaCompleted),n.Ab(2),n.lc("collectionSize",t.collectionSize)("page",t.page)("pageSize",t.pageSize))},directives:[a.k,c.d,a.j],styles:[".linea{background-color:#2a3886;height:2px;bottom:0}.btn-s-radius{border:none;border-radius:0;margin:.4rem;box-shadow:2px 1px 12px #c2c6cf}.back-color-success{background-color:#80baec}.back-color-modify{background-color:#ad7fa7}"],encapsulation:2}),g),m=i("3Pt+"),f=i("LazK");function h(e,t){if(1&e&&(n.Sb(0,"option",28),n.Bc(1),n.Rb()),2&e){var i=t.$implicit;n.lc("value",i.cod),n.Ab(1),n.Cc(i.cod)}}var v,S,R,y,k=((v=function(){function e(t,i,a,o,n){_classCallCheck(this,e),this.fb=t,this.imageService=i,this.activateRouter=a,this.router=o,this.categoriaService=n,this.urlImg="/assets/images/drop.png",this.sweetAlert=new r.a,this.cargarFormulario()}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.getAllCategories(),this.idImage=this.activateRouter.snapshot.params.idImage,this.idImage&&this.imageService.getOneImage(this.idImage).subscribe((function(t){e.cargarDataFormulario(t)}))}},{key:"cargarFormulario",value:function(){this.formulario=this.fb.group({codigo:["",m.n.required],descripcion:["",m.n.required],categoria:[""]})}},{key:"cargarDataFormulario",value:function(e){this.formulario.setValue({codigo:e.codigo,descripcion:e.descripcion,categoria:e.categoria}),this.urlImg=e.fileUrl,this.fileImg=e.fileUrl,this.fileImgOriginal=e.fileUrl}},{key:"limpiarFormulario",value:function(){this.formulario.reset({codigo:"",descripcion:"",categoria:""}),this.fileImg=null}},{key:"getAllCategories",value:function(){var e=this;this.categoriaService.getAllCategories().subscribe((function(t){e.categories=t}))}},{key:"validarCampos",value:function(e){return this.formulario.get(e).invalid&&this.formulario.get(e).touched}},{key:"cargarImage",value:function(e){var t=this,i=e.target.files[0];if(e.target.files&&i){var a=new FileReader;a.onload=function(e){t.urlImg=e.target.result},a.readAsDataURL(i),this.fileImg=i}else console.log("formato desconocido")}},{key:"cancelarAddAndUpdate",value:function(){this.router.navigate(["../../images"],{relativeTo:this.activateRouter})}},{key:"addAndUpdate",value:function(){if(this.formulario.invalid)return Object.values(this.formulario.controls).forEach((function(e){e.markAsTouched()}));this.sweetAlert.dialogAlertWait();var e=!1,t=this.formulario.value;this.idImage?this.fileImg===this.fileImgOriginal?(t.fileUrl=this.fileImgOriginal,e=this.imageService.updateImage(t,this.idImage)):(t.id=this.idImage,e=this.imageService.updateImage(t,this.idImage,this.fileImg,this.fileImgOriginal)):e=this.imageService.addImage(t,this.fileImg),this.showDialog(e,t.codigo)}},{key:"showDialog",value:function(e,t){e?(this.sweetAlert.dialogAlertSuccess(t),this.limpiarFormulario(),this.cancelarAddAndUpdate()):this.sweetAlert.dialogAlertError(t)}},{key:"codigoNoValido",get:function(){return this.validarCampos("codigo")}},{key:"descripcionNoValido",get:function(){return this.validarCampos("descripcion")}}]),e}()).\u0275fac=function(e){return new(e||v)(n.Nb(m.b),n.Nb(l.a),n.Nb(o.a),n.Nb(o.b),n.Nb(f.a))},v.\u0275cmp=n.Hb({type:v,selectors:[["app-image"]],decls:38,vars:7,consts:[[1,"card"],[1,"card-body"],[1,"card-title"],[1,"linea"],[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-md-6"],["for","inputEmail4"],["formControlName","codigo","name","codigo","type","text",1,"form-control"],["for","inputPassword4"],["formControlName","descripcion","name","descripcion","type","text",1,"form-control"],[1,"form-group","col-md-12"],["for","inputState"],["formControlName","categoria","name","categoria","id","inputState",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group"],[1,"card","mb-3",2,"max-width","540px"],[1,"card-header","bg-transparent","border-success"],[1,"upload-btn-wrapper"],[1,"btn"],["type","file","accept",".png, .jpg","name","myfile",3,"change"],[1,"row"],[1,"col-md-8"],[1,"card-body","text-center"],["alt","",2,"width","50%",3,"src"],[1,"float-right"],["type","button",1,"btn","btn-danger","btn-s-radius",3,"click"],["type","submit",1,"btn","btn-primary","btn-s-radius"],[3,"value"]],template:function(e,t){1&e&&(n.Sb(0,"div",0),n.Sb(1,"div",1),n.Sb(2,"h5",2),n.Bc(3,"Nuevo Imagen"),n.Rb(),n.Ob(4,"hr",3),n.Sb(5,"div"),n.Sb(6,"form",4),n.ec("ngSubmit",(function(){return t.addAndUpdate()})),n.Sb(7,"div",5),n.Sb(8,"div",6),n.Sb(9,"label",7),n.Bc(10,"Codigo"),n.Rb(),n.Ob(11,"input",8),n.Rb(),n.Sb(12,"div",6),n.Sb(13,"label",9),n.Bc(14,"Descripcion"),n.Rb(),n.Ob(15,"input",10),n.Rb(),n.Rb(),n.Sb(16,"div",5),n.Sb(17,"div",11),n.Sb(18,"label",12),n.Bc(19,"Categoria"),n.Rb(),n.Sb(20,"select",13),n.zc(21,h,2,2,"option",14),n.Rb(),n.Rb(),n.Rb(),n.Sb(22,"div",15),n.Sb(23,"div",16),n.Sb(24,"div",17),n.Sb(25,"div",18),n.Sb(26,"button",19),n.Bc(27,"Importar"),n.Rb(),n.Sb(28,"input",20),n.ec("change",(function(e){return t.cargarImage(e)})),n.Rb(),n.Rb(),n.Rb(),n.Sb(29,"div",21),n.Sb(30,"div",22),n.Sb(31,"div",23),n.Ob(32,"img",24),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Sb(33,"div",25),n.Sb(34,"button",26),n.ec("click",(function(){return t.cancelarAddAndUpdate()})),n.Bc(35,"Cancelar"),n.Rb(),n.Sb(36,"button",27),n.Bc(37,"Guardar"),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Rb()),2&e&&(n.Ab(6),n.lc("formGroup",t.formulario),n.Ab(5),n.Fb("is-invalid",t.codigoNoValido),n.Ab(4),n.Fb("is-invalid",t.descripcionNoValido),n.Ab(6),n.lc("ngForOf",t.categories),n.Ab(11),n.lc("src",t.urlImg,n.uc))},directives:[m.p,m.i,m.d,m.a,m.h,m.c,m.m,a.j,m.j,m.o],styles:[".upload-btn-wrapper[_ngcontent-%COMP%]{position:relative;overflow:hidden;display:inline-block}.upload-btn-wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border:2px solid grey;color:grey;background-color:#fff;padding:5px 15px;border-radius:5px;font-size:15px;font-weight:700}.upload-btn-wrapper[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{font-size:30px;position:absolute;left:0;top:0;opacity:0;cursor:pointer}"]}),v),C=[{path:"",component:(S=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}(),S.\u0275fac=function(e){return new(e||S)},S.\u0275cmp=n.Hb({type:S,selectors:[["app-images"]],decls:1,vars:0,template:function(e,t){1&e&&n.Ob(0,"router-outlet")},directives:[o.f],styles:[""]}),S),children:[{path:"",component:p},{path:"addImage",component:k},{path:":idImage",component:k}]}],I=((y=function e(){_classCallCheck(this,e)}).\u0275mod=n.Lb({type:y}),y.\u0275inj=n.Kb({factory:function(e){return new(e||y)},imports:[[o.e.forChild(C)],o.e]}),y),w=((R=function e(){_classCallCheck(this,e)}).\u0275mod=n.Lb({type:R}),R.\u0275inj=n.Kb({factory:function(e){return new(e||R)},imports:[[a.c,I,m.e,m.k,c.b]]}),R)}}]);